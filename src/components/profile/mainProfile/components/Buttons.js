import { observer } from 'mobx-react-lite'
import { useContext } from 'react'
import { View, TouchableOpacity, StyleSheet, Alert, Linking, AsyncStorage } from 'react-native'
import Svg, { Path, Defs, G, ClipPath, Rect } from 'react-native-svg'
import { logout } from '../../../../http/user'
import { AppContext } from '../../../../store'
import { DARK_GREY_COLOR, GREEN_COLOR, RED_COLOR } from "../../../../styles/colors";


const Buttons = observer(() => {

    const { user } = useContext(AppContext)

    const channelId = 'UCCVb0ZJzMBEwzK-OwWZarYg'

    const click = async (link) => {
        switch (link) {
            case 'yt':
                Alert.alert("Youtube канал", "Youtube канал команды, которая занималась разработкой данного проекта", [
                    {
                        text: "Открыть", onPress: () => Linking.canOpenURL('vnd.youtube://channel/' + channelId).then(supported => {
                            if (supported) {
                                return Linking.openURL('vnd.youtube://channel/' + channelId);
                            } else {
                                return Linking.openURL('https://www.youtube.com/channel/' + channelId);
                            }
                        })
                    },
                    {
                        text: "Отменить", style: 'cancel'
                    },
                ])
                break
            case 'gh':
                Alert.alert("Github проект", "Наш проект есть на github. Вы можете читать и смотреть изменения в нашем приложении", [
                    {
                        text: "Открыть", onPress: () => Linking.canOpenURL('https://github.com/evyz/calories-calculation-app/tree/main').then(supported => {
                            return Linking.openURL('https://github.com/evyz/calories-calculation-app/tree/main');
                        })
                    },
                    {
                        text: "Отменить", style: 'cancel'
                    },
                ])

                break
            case 'qr':
                return Alert.alert('QR-код временно недоступен', 'Данная функция временно недоступа. В скором обновлении данная проблема будет решена')
                break
            case 'logout':
                await AsyncStorage.removeItem('token')
                user.setIsAuth(false)
                logout().then(data => {
                    console.log(data)
                })

                // TODO : добавить полный функционал 
                //          по удалению токена из фронта и бека.

                break
        }
    }

    return (

        <View style={styles.buttons}>
            <TouchableOpacity style={[styles.button, { backgroundColor: RED_COLOR }]} onPress={() => click('yt')} >
                <Svg width="26" height="19" viewBox="0 0 26 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <G clip-path="url(#clip0_3623_160)">
                        <Path d="M25.433 2.85183C25.1328 1.73445 24.2489 0.850545 23.1315 0.550353C21.1135 0 12.9917 0 12.9917 0C12.9917 0 4.86978 0.0166774 2.85182 0.56703C1.73444 0.867223 0.850541 1.75112 0.550348 2.86851C-0.0667138 6.45414 -0.300197 11.9243 0.567026 15.3598C0.867218 16.4772 1.75112 17.3611 2.8685 17.6613C4.88646 18.2117 13.0083 18.2117 13.0083 18.2117C13.0083 18.2117 21.1302 18.2117 23.1482 17.6613C24.2656 17.3611 25.1495 16.4772 25.4496 15.3598C26.0834 11.7742 26.2835 6.30404 25.433 2.85183ZM10.4067 13.0083V5.20334L17.1443 9.10584L10.4067 13.0083Z" fill="white" />
                    </G>
                    <Defs>
                        <ClipPath id="clip0_3623_160">
                            <Rect width="26" height="18.2117" fill="white" />
                        </ClipPath>
                    </Defs>
                </Svg>

            </TouchableOpacity>
            <TouchableOpacity style={[styles.button, { backgroundColor: DARK_GREY_COLOR }]} onPress={() => click('gh')}>

                <Svg width="27" height="26" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <Path fill-rule="evenodd" clip-rule="evenodd" d="M13.002 0C5.82103 0 0 5.82101 0 13.002C0 18.7444 3.72609 23.6181 8.89072 25.3358C9.53925 25.4576 9.77901 25.0528 9.77901 24.7108C9.77901 24.4003 9.76722 23.3784 9.76329 22.2896C6.14725 23.0757 5.38474 20.7568 5.38474 20.7568C4.79517 19.2553 3.94226 18.8544 3.94226 18.8544C2.76312 18.0487 4.03266 18.0644 4.03266 18.0644C5.33758 18.1548 6.02541 19.4047 6.02541 19.4047C7.1849 21.3935 9.06759 20.8157 9.81045 20.4856C9.92837 19.6444 10.2625 19.0706 10.6359 18.7483C7.74696 18.4181 4.71263 17.3058 4.71263 12.322C4.71263 10.9031 5.21966 9.74361 6.05292 8.83175C5.91929 8.50552 5.47121 7.18095 6.1787 5.39259C6.1787 5.39259 7.27137 5.04278 9.75543 6.72502C10.7931 6.4381 11.9054 6.29267 13.0099 6.28874C14.1143 6.29267 15.2266 6.4381 16.2682 6.72502C18.7483 5.04278 19.841 5.39259 19.841 5.39259C20.5485 7.18488 20.1044 8.50552 19.9668 8.83175C20.8 9.74361 21.3031 10.9031 21.3031 12.322C21.3031 17.3137 18.261 18.4142 15.3681 18.7365C15.8359 19.1413 16.2486 19.9314 16.2486 21.142C16.2486 22.8831 16.2328 24.2824 16.2328 24.7108C16.2328 25.0567 16.4687 25.4615 17.1251 25.3358C22.2897 23.6142 26.0079 18.7444 26.0079 13.002C26.0001 5.82101 20.179 0 13.002 0Z" fill="white" />
                    <Path d="M4.92488 18.6658C4.89736 18.7287 4.79517 18.7484 4.70084 18.7051C4.60651 18.6619 4.55541 18.5754 4.58292 18.5086C4.61044 18.4418 4.71263 18.4221 4.80696 18.4693C4.90129 18.5125 4.95632 18.599 4.92488 18.6658Z" fill="white" />
                    <Path d="M5.45157 19.2514C5.38868 19.3104 5.26684 19.2829 5.1843 19.1925C5.09784 19.1021 5.08212 18.9802 5.145 18.9213C5.20789 18.8623 5.3258 18.8898 5.41226 18.9802C5.49873 19.0746 5.51445 19.1925 5.45157 19.2514Z" fill="white" />
                    <Path d="M5.96248 20.0021C5.88387 20.0572 5.75417 20.0061 5.67163 19.8882C5.59302 19.7742 5.59302 19.6327 5.67163 19.5776C5.75024 19.5226 5.87994 19.5737 5.96248 19.6877C6.04502 19.8056 6.04502 19.9432 5.96248 20.0021Z" fill="white" />
                    <Path d="M6.66609 20.7253C6.59534 20.8039 6.44205 20.7842 6.332 20.6742C6.21802 20.5681 6.18657 20.4187 6.25732 20.3401C6.32807 20.2615 6.48136 20.2851 6.59534 20.3912C6.7054 20.4973 6.74077 20.6467 6.66609 20.7253Z" fill="white" />
                    <Path d="M7.63298 21.1458C7.60154 21.248 7.45611 21.2952 7.30675 21.2519C7.16132 21.2087 7.06305 21.0869 7.0945 20.9847C7.12594 20.8825 7.27137 20.8353 7.42073 20.8786C7.57009 20.9218 7.66443 21.0397 7.63298 21.1458Z" fill="white" />
                    <Path d="M8.69815 21.2205C8.70208 21.3267 8.5763 21.4171 8.42301 21.4171C8.26579 21.421 8.14001 21.3345 8.14001 21.2284C8.14001 21.1183 8.26186 21.0319 8.41908 21.028C8.57237 21.028 8.69815 21.1144 8.69815 21.2205Z" fill="white" />
                    <Path d="M9.68861 21.0555C9.70826 21.1617 9.59821 21.2678 9.44492 21.2953C9.29556 21.3228 9.15407 21.2599 9.13442 21.1538C9.11476 21.0477 9.22482 20.9376 9.37417 20.9101C9.53139 20.8865 9.66895 20.9494 9.68861 21.0555Z" fill="white" />
                </Svg>

            </TouchableOpacity>
            <TouchableOpacity style={[styles.button, { backgroundColor: GREEN_COLOR }]} onPress={() => click('qr')}>

                <Svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <Path d="M9.84488 25.2551C9.84488 24.8423 9.51277 24.5102 9.09999 24.5102H2.23942C1.82665 24.5102 1.49453 24.1781 1.49453 23.7653V16.9047C1.49453 16.492 1.16241 16.1599 0.74964 16.1599C0.336866 16.1599 0.00474992 16.492 0.00474992 16.9047V25.2551C5.39515e-06 25.6679 0.332122 26 0.744895 26H9.09525C9.51277 26 9.84488 25.6679 9.84488 25.2551Z" fill="white" />
                    <Path d="M11.2587 13.5551H3.78611C3.13136 13.5551 2.59998 14.0865 2.59998 14.7413V22.2139C2.59998 22.8686 3.13136 23.4 3.78611 23.4H11.2587C11.9135 23.4 12.4449 22.8686 12.4449 22.2139V14.7413C12.4449 14.0865 11.9135 13.5551 11.2587 13.5551Z" fill="white" />
                    <Path d="M16.1551 25.2551C16.1551 24.8423 16.4872 24.5102 16.9 24.5102H23.7606C24.1733 24.5102 24.5055 24.1781 24.5055 23.7653V16.9047C24.5055 16.492 24.8376 16.1599 25.2503 16.1599C25.6631 16.1599 25.9952 16.492 25.9952 16.9047V25.2551C26 25.6679 25.6631 26 25.2503 26H16.9C16.4872 26 16.1551 25.6679 16.1551 25.2551Z" fill="white" />
                    <Path d="M14.7365 13.5551H22.2091C22.8639 13.5551 23.3952 14.0865 23.3952 14.7413V22.2139C23.3952 22.8686 22.8639 23.4 22.2091 23.4H14.7365C14.0817 23.4 13.5504 22.8686 13.5504 22.2139V14.7413C13.5504 14.0865 14.0817 13.5551 14.7365 13.5551Z" fill="white" />
                    <Path d="M16.1551 0.749593C16.1551 1.16237 16.4872 1.49448 16.9 1.49448H23.7606C24.1733 1.49448 24.5055 1.8266 24.5055 2.23937V9.09996C24.5055 9.51273 24.8376 9.84485 25.2503 9.84485C25.6631 9.84485 25.9952 9.51273 25.9952 9.09996V0.749593C25.9952 0.336819 25.6631 0.00470161 25.2503 0.00470161H16.9C16.4872 -4.29153e-05 16.1551 0.336819 16.1551 0.749593Z" fill="white" />
                    <Path d="M14.7365 12.4496H22.2091C22.8639 12.4496 23.3952 11.9182 23.3952 11.2635V3.79082C23.3952 3.13608 22.8639 2.60469 22.2091 2.60469H14.7365C14.0817 2.60469 13.5504 3.13608 13.5504 3.79082V11.2635C13.5504 11.9182 14.0817 12.4496 14.7365 12.4496Z" fill="white" />
                    <Path d="M9.8449 0.749593C9.8449 1.16237 9.51278 1.49448 9.10001 1.49448H2.23943C1.82666 1.49448 1.49454 1.8266 1.49454 2.23937V9.09996C1.49454 9.51273 1.16242 9.84485 0.749651 9.84485C0.336877 9.84485 0.00476074 9.51273 0.00476074 9.09996V0.749593C0.00476074 0.336819 0.336877 0.00470161 0.749651 0.00470161H9.10001C9.51278 -4.29153e-05 9.8449 0.336819 9.8449 0.749593Z" fill="white" />
                    <Path d="M11.2587 12.4496H3.78611C3.13136 12.4496 2.59998 11.9182 2.59998 11.2635V3.79082C2.59998 3.13608 3.13136 2.60469 3.78611 2.60469H11.2587C11.9135 2.60469 12.4449 3.13608 12.4449 3.79082V11.2635C12.4449 11.9182 11.9135 12.4496 11.2587 12.4496Z" fill="white" />
                </Svg>

            </TouchableOpacity>
            <TouchableOpacity style={[styles.button, { backgroundColor: RED_COLOR }]} onPress={() => click('logout')}>

                <Svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <Path d="M3.37934 4.83471V26.3653C3.37934 27.2549 4.10132 27.9769 4.99091 27.9769H12.8983C13.7879 27.9769 14.5099 28.6988 14.5099 29.5884C14.5099 30.478 13.7879 31.2 12.8983 31.2H2.11157C1.22198 31.2 0.5 30.478 0.5 29.5884V1.61157C0.5 0.721983 1.22198 0 2.11157 0H12.8983C13.7879 0 14.5099 0.721983 14.5099 1.61157C14.5099 2.50116 13.7879 3.22314 12.8983 3.22314H4.99091C4.10132 3.22314 3.37934 3.94512 3.37934 4.83471Z" fill="white" />
                    <Path d="M7.50494 14.6C6.95266 14.6 6.50494 15.0477 6.50494 15.6C6.50494 16.1523 6.95266 16.6 7.50494 16.6L7.50494 14.6ZM27.2071 16.3071C27.5976 15.9166 27.5976 15.2834 27.2071 14.8929L20.8431 8.52891C20.4526 8.13838 19.8194 8.13838 19.4289 8.52891C19.0384 8.91943 19.0384 9.5526 19.4289 9.94312L25.0858 15.6L19.4289 21.2568C19.0384 21.6474 19.0384 22.2805 19.4289 22.671C19.8194 23.0616 20.4526 23.0616 20.8431 22.671L27.2071 16.3071ZM7.50494 16.6L26.5 16.6L26.5 14.6L7.50494 14.6L7.50494 16.6Z" fill="white" />
                </Svg>

            </TouchableOpacity>
        </View>
    )
})

const styles = StyleSheet.create({
    buttons: {
        width: '100%',
        height: 50,

        display: 'flex',
        flexDirection: 'row',
        alignItems: 'center',
        justifyContent: 'space-between',

        padding: 38,
    },
    button: {
        width: 48,
        height: 48,

        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',

        borderRadius: 10,
    }
})

export default Buttons